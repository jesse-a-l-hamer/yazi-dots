[mgr]
  linemode    = "mtime"
  show_hidden = true
  ratio       = [1, 3, 4]

[preview]
  wrap = "yes"

[open]
  prepend_rules = [{ mime = "image/*", use = ["open", "set-wallpaper"] }]

[opener]
  edit = [
    { run = "${EDITOR:-vi} %s", block = true, for = "unix", desc = "Edit" },
    { run = "sudoedit %s", block = true, for = "unix", desc = "Edit (as root)" },
    { run = "code %s", desc = "code", for = "windows", orphan = true },
    { run = "code -w %s", desc = "code (block)", for = "windows", block = true },
  ]
  set-wallpaper = [
    { run = 'hyprctl hyprpaper reload ,"%s"', for = "linux", desc = "Set as wallpaper" },
  ]
  extract = [{ run = 'ouch d -y "%s"', desc = "Extract here with ouch", for = "unix" }]
  play = [
    { run = "app2unit-open -- %s1", desc = "Play", for = "linux" },
    { run = "open %s", desc = "Play", for = "macos" },
    { run = 'start "" %s1', orphan = true, desc = "Play", for = "windows" },
    { run = "termux-open %s1", desc = "Play", for = "android" },
    { run = "mediainfo %s1; echo 'Press enter to exit'; read _", block = true, desc = "Show media info", for = "unix" },
    { run = "mediainfo %s1 & pause", block = true, desc = "Show media info", for = "windows" },
  ]
  open = [
    { run = "app2unit-open -- %s1", desc = "Open", for = "linux" },
    { run = "open %s", desc = "Open", for = "macos" },
    { run = 'start "" %s1', desc = "Open", for = "windows", orphan = true },
    { run = "termux-open %s1", desc = "Open", for = "android" },
  ]
  reveal = [
    { run = "app2unit-open -- %d1", desc = "Reveal", for = "linux" },
    { run = "open -R %s1", desc = "Reveal", for = "macos" },
    { run = "explorer /select,%s1", desc = "Reveal", for = "windows", orphan = true },
    { run = "termux-open %d1", desc = "Reveal", for = "android" },
    { run = "clear; exiftool %s1; echo 'Press enter to exit'; read _", desc = "Show EXIF", for = "unix", block = true },
  ]

[plugin]
  prepend_fetchers = [
    { id = "git", name = "*", run = "git" },
    { id = "git", name = "*/", run = "git" },
  ]
  prepend_previewers = [
    { mime = "application/*zip", run = "ouch" },
    { mime = "application/x-tar", run = "ouch" },
    { mime = "application/x-bzip2", run = "ouch" },
    { mime = "application/x-7z-compressed", run = "ouch" },
    { mime = "application/x-rar", run = "ouch" },
    { mime = "application/vnd.rar", run = "ouch" },
    { mime = "application/x-xz", run = "ouch" },
    { mime = "application/xz", run = "ouch" },
    { mime = "application/x-zstd", run = "ouch" },
    { mime = "application/zstd", run = "ouch" },
    { mime = "application/java-archive", run = "ouch" },
    { name = "*{.tar,.tar.*}", run = "ouch" },
    { mime = "application/subrip", run = "mediainfo" },
    { mime = "application/postscript", run = "mediainfo" },
    { url = "/run/user/1000/gvfs/**/*", run = "noop" },
    { url = "/run/media/jalhamer/**/*", run = "noop" },
    { url = "*.{djvu,djv}", run = "djvu-view" },
    { mime = "{audio,video,image}/*", run = "mediainfo" },
    { mime = "application/octet-stream", run = 'piper -- hexyl --border=none --terminal-width=$w "$1"' },
  ]
  prepend_preloaders = [
    { mime = "application/subrip", run = "mediainfo" },
    { mime = "application/postscript", run = "mediainfo" },
    { url = "/run/user/1000/gvfs/**/*", run = "noop" },
    { url = "/run/media/jalhamer/**/*", run = "noop" },
    { mime = "{audio,video,image}/*", run = "mediainfo" },
  ]
  append_previewers = [
    { mime = "*/*binary*", run = 'piper -- hexyl --border=none --terminal-width=$w "$1"' },
    { url = "*/", run = 'piper -- eza -TL=3 --color=always --icons=always --group-directories-first --no-quotes "$1"' },
  ]

[tasks]
  image_alloc = 1073741824 # = 1024*1024*1024 = 1024MB
